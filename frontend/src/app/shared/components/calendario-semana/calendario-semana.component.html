<div *ngIf="!isLoading; else loadingTemplate">
  <div class="calendar-week">
    <div class="calendar-header">
      <button class="nav-button" (click)="prevWeek()">&#8249;</button>
      <h3>{{ weekRange }}</h3>
      <button class="nav-button" (click)="nextWeek()">&#8250;</button>
    </div>
    <table class="week-table">
      <thead>
        <tr>
          <th>Hora</th>
          <th *ngFor="let day of weekDays">
            {{ day | date: 'EEE dd/MM' }}
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let row of schedule">
          <td class="time-cell">{{ row.time }}</td>
          <td *ngFor="let cell of row.cells"
              (click)="!cell.disabled && selectSlot(cell.day, row.time)"
              [ngClass]="{
                'available': cell.available && !cell.disabled,
                'not-available': !cell.available && !cell.disabled,
                'disabled': cell.disabled
              }">
            <!-- Sin texto; se indica solo con el color -->
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<ng-template #loadingTemplate>
  <div class="loading">
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
  </div>
</ng-template>
